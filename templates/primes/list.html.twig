{% extends 'base.html.twig' %}

{% block title %}Equinoxer - Primes List{% endblock %}

{% block body %}
    <h1>EQUINOXER - Primes List</h1>

    <section>
        <div style="text-align: center; margin-bottom: 2rem;">
            <input type="text" id="primeSearch" placeholder="Search primes..." 
                   style="padding: 10px; width: 300px; border-radius: 5px; border: 1px solid #ccc; background: #333; color: #fff;">
            <br>
            <a href="{{ path('home') }}" style="color: #fffdd0; text-decoration: none; margin-top: 10px; display: inline-block;">Back to Home</a>
        </div>

        <ul class="primes-list" id="primesContainer">
            {% for prime in primes %}
                <li class="prime-item" data-name="{{ prime.name|lower }}">
                    <a href="{{ path('primes_show', { slug: prime.slug }) }}">
                        <strong>{{ prime.name }}</strong>
                    </a>
                </li>
            {% endfor %}
        </ul>

        <div id="no-primes-msg" style="text-align: center; {% if primes|length > 0 %}display: none;{% endif %} margin-top: 20px; font-style: italic;">
            Not a single prime :( If we are wrong try loading data
        </div>
    </section>

    <script>
        document.getElementById('primeSearch').addEventListener('input', function(e) {
            const term = e.target.value.toLowerCase();
            const items = document.querySelectorAll('.prime-item');
            let visibleCount = 0;
            
            items.forEach(item => {
                const name = item.getAttribute('data-name');
                if (name.includes(term)) {
                    item.style.display = 'block';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });

            const msg = document.getElementById('no-primes-msg');
            if (visibleCount === 0) {
                msg.style.display = 'block';
            } else {
                msg.style.display = 'none';
            }
        });
    </script>
{% endblock %}
