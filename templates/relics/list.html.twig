{% extends 'base.html.twig' %}

{% block title %}Equinoxer - Relics List{% endblock %}

{% block body %}
    <h1>EQUINOXER - Relics List</h1>

    <section>
        <div style="text-align: center; margin-bottom: 2rem;">
            <input type="text" id="relicSearch" placeholder="Search relics..." 
                   style="padding: 10px; width: 300px; border-radius: 5px; border: 1px solid #ccc; background: #333; color: #fff;">
            <br>
            <a href="{{ path('home') }}" style="color: #fffdd0; text-decoration: none; margin-top: 10px; display: inline-block;">Back to Home</a>
        </div>

        <ul class="relics-list" id="relicsList">
            {% for relic in relics %}
                <li class="relic-item" data-name="{{ relic.name|lower }}">
                    <a href="{{ path('relic_show', { slug: relic.slug }) }}">
                        {{ relic.name }}
                    </a>
                </li>
            {% else %}
                 <!-- Server-side empty state -->
            {% endfor %}
        </ul>
        
        <div id="no-relics-msg" style="text-align: center; {% if relics|length > 0 %}display: none;{% endif %} margin-top: 20px; font-style: italic;">
            Not a single relic :( If we are wrong try loading data
        </div>
    </section>

    <script>
        document.getElementById('relicSearch').addEventListener('input', function(e) {
            const term = e.target.value.toLowerCase();
            const items = document.querySelectorAll('.relic-item');
            let visibleCount = 0;
            
            items.forEach(item => {
                const name = item.getAttribute('data-name');
                if (name.includes(term)) {
                    item.style.display = '';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });

            const msg = document.getElementById('no-relics-msg');
            if (visibleCount === 0) {
                msg.style.display = 'block';
            } else {
                msg.style.display = 'none';
            }
        });
    </script>
{% endblock %}
